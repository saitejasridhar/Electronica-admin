<ngb-alert *ngIf="isMessageVisible" novalidate type="success" [dismissible]="false">
  User data updated successfully
</ngb-alert>
<form [formGroup]="userForm" class="needs-validation" novalidate (ngSubmit)="onFormSubmit(userForm.value)">
  <div class="form-group">
    <label for="firstName">First Name</label>
    <input type="text" id="firstName" placeholder="John" formControlName="firstName" [ngClass]="{'form-control':true,'is-invalid':!userForm.get('firstName').valid && userForm.get('firstName').touched}">
    <div class="invalid-feedback" *ngIf="!userForm.get('firstName').valid && userForm.get('firstName').touched">Please enter First Name</div>
  </div>
  <div class="form-group">
    <label for="lastName">Last Name</label>
    <input type="text" id="lastName" placeholder="Doe" formControlName="lastName" [ngClass]="{'form-control':true,'is-invalid':!userForm.get('lastName').valid && userForm.get('lastName').touched}">
    <div class="invalid-feedback" *ngIf="!userForm.get('lastName').valid && userForm.get('lastName').touched">Please enter Last Name</div>
  </div>
  <div class="form-group">
    <label for="email">Email Address</label>
    <input type="text" id="email" placeholder="john.doe@miwu.pl" formControlName="email" [ngClass]="{'form-control':true,'is-invalid':!userForm.get('email').valid && userForm.get('email').touched}">
    <div class="invalid-feedback" *ngIf="!userForm.get('email').valid && userForm.get('email').touched">Please enter Email Address</div>
  </div>
  <div class="form-group">
    <label for="occupation">Occupation</label>
    <select id="occupation" formControlName="occupation" [ngClass]="{'form-control':true,'is-invalid':!userForm.get('occupation').valid && userForm.get('occupation').touched}">
      <option selected disabled>Please select</option>
      <option>entertainer</option>
      <option>developer</option>
    </select>
    <div class="invalid-feedback" *ngIf="!userForm.get('occupation').valid && userForm.get('occupation').touched">Please enter Occupation</div>
  </div>
  <div class="form-group">
    <label for="dateOfBirth">Date of Birth</label>
    <div class="input-group">
      <input type="text" id="dateOfBirth" placeholder="yyyy-mm-dd" ngbDatepicker #d="ngbDatepicker" formControlName="dateOfBirth" [ngClass]="{'form-control':true,'is-invalid':!userForm.get('occupation').valid && userForm.get('occupation').touched}">
      <div class="input-group-append">
        <button class="btn btn-outline-primary" (click)="d.toggle()" type="button">
          Pick date
        </button>
      </div>
      <div class="invalid-feedback" *ngIf="!userForm.get('dateOfBirth').valid && userForm.get('dateOfBirth').touched">Please pick date of birth</div>
    </div>
  </div>
  <div class="form-group">
    <div *ngIf="userForm.get('photo').value" class="p-2">
      <img src="{{userForm.get('photo').value}}" class="w-25"/>
    </div>
    <input type="hidden" formControlName="photo"/>
    <label for="photo">Photo</label>
    <div class="input-group">
      <input type="file" id="photo" ng2FileSelect [uploader]="uploader" class="form-control" accept="image/*">
      <div class="input-group-append">
        <button type="button" class="btn btn-success btn-s"
                (click)="uploader.uploadAll()"
                [disabled]="!uploader.getNotUploadedItems().length" >
          Upload a Picture
        </button>
      </div>
    </div>
  </div>
  <div class="form-group text-right">
    <button type="submit" class="btn btn-outline-primary" routerLink="/users">Back</button>
    <button type="submit" class="btn btn-primary ml-1" [disabled]="userForm.invalid || userForm.prestine">Submit</button>
  </div>
</form>
